Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/klipper_config/printer.cfg', '-l', '/home/pi/klipper_logs/klippy.log', '-a', '/tmp/klippy_uds']
Git version: 'v0.10.0-588-g51da02b7'
CPU: 4 core ARMv7 Processor rev 4 (v7l)
Python: '2.7.16 (default, Oct 10 2019, 22:02:15) \n[GCC 8.3.0]'
Start printer at Sat Dec 17 23:17:20 2022 (1671319040.3 25.7)
===== Config file =====
[virtual_sdcard]
path = ~/gcode_files

[display_status]

[pause_resume]

[neopixel neo]
pin = PA8
chain_count = 16
color_order = GRBW
initial_red = 0
initial_green = 0
initial_blue = 0
initial_white = 1

[gcode_macro RGB_Off]
gcode = 
	SET_LED LED=neo RED=0 GREEN=0 BLUE=0

[gcode_macro RGB_WHITE]
gcode = 
	SET_LED LED=neo RED=0 GREEN=0 BLUE=0 WHITE=1

[gcode_macro BLUE_PURPLE]
gcode = 
	SET_LED LED=neo RED=0 GREEN=0 BLUE=1
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=8
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=10
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=12
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=14
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=16

[exclude_object]

[stepper_x]
step_pin = PB13
dir_pin = PB12
enable_pin = !PB14
rotation_distance = 40
microsteps = 16
endstop_pin = !PC0
position_endstop = 120
position_max = 120
homing_speed = 30
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.35
hold_current = 0.0001
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = PB2
enable_pin = !PB11
rotation_distance = 40
microsteps = 16
endstop_pin = !PC1
position_endstop = 120
position_max = 120
homing_speed = 30
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.35
hold_current = 0.0001
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
rotation_distance = 8
microsteps = 16
endstop_pin = !PC2
position_endstop = -.10
position_max = 120
position_min = -1
homing_speed = 10
second_homing_speed = 3.0
homing_retract_dist = 3.0

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
interpolate = False
run_current = 0.3
hold_current = 0.0001
sense_resistor = 0.110
stealthchop_threshold = 999999

[extruder]
step_pin = PB3
dir_pin = PB4
enable_pin = !PD1
microsteps = 16
rotation_distance = 22.68
gear_ratio = 50:17
nozzle_diameter = 0.400
filament_diameter = 1.750
heater_pin = PC8
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PA0
control = pid
pid_kp = 22.2
pid_ki = 1.08
pid_kd = 114
min_temp = 0
max_temp = 275
min_extrude_temp = 195
pressure_advance = 0.2
pressure_advance_smooth_time = 0.040
max_extrude_only_distance = 400.0

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.75
stealthchop_threshold = 999999

[heater_bed]
heater_pin = PC12
sensor_type = ATC Semitec 104GT-2
sensor_pin = PC4
control = pid
pid_kp = 58.437
pid_ki = 2.347
pid_kd = 363.769
min_temp = 0
max_temp = 115

[temperature_sensor raspberry_pi]
sensor_type = temperature_host
min_temp = 10
max_temp = 100

[temperature_sensor mcu_temp]
sensor_type = temperature_mcu
min_temp = 0
max_temp = 100

[fan]
pin = PC7

[heater_fan hotend_fan]
pin = PB15
heater = extruder
heater_temp = 50.0

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32g0b1xx_3F003A001850344D30363620-if00

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_z_velocity = 35
max_z_accel = 350
square_corner_velocity = 5.0

[board_pins]
aliases = 
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

[idle_timeout]
timeout = 1800

[homing_override]
axes = z
set_position_z = 0
gcode = 
	G90
	G0 Z5 F600
	G28 X Y
	G0 X30 Y0 F3600
	G28 Z
	G0 Z10 F1800
	G0 X60 Y60 Z20 F3600

[bed_screws]
screw1 = 60,5
screw1_name = front screw
screw2 = 5,115
screw2_name = back left
screw3 = 115,115
screw3_name = back right

[gcode_macro PRINT_START]
gcode = 
	SET_LED LED=neo RED=0 GREEN=0 BLUE=1
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=8
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=10
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=12
	SET_LED LED=neo RED=1 GREEN=0 BLUE=1 INDEX=14
	G1 Z2 F1800                   ; move nozzle away from bed

[gcode_macro PRINT_END]
gcode = 
	SET_LED LED=neo RED=0.4862 GREEN=1 BLUE=0
	M400                           ; wait for buffer to clear
	G92 E0                         ; zero the extruder
	G1 E-3.0 F2000                 ; retract filament
	G91                            ; relative positioning
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	G0 Z{z_safe} F3600    ; move nozzle up
	G0 X{x_safe} Y{y_safe} F1800    ; move nozzle to remove stringing
	TURN_OFF_HEATERS
	M107                           ; turn off fan
	G90                            ; absolute positioning
	G0 X60 Y{max_y} F3600          ; park nozzle at rear

[gcode_macro LOAD_FILAMENT]
gcode = 
	SET_LED LED=neo RED=1 GREEN=0.0784 BLUE=0.5764
	M83                            ; set extruder to relative
	G1 E380 F1800                  ; quickly load filament to down bowden
	G1 E35 F300                    ; slower extrusion for hotend path
	G1 E30 F150                    ; prime nozzle with filament
	M82                            ; set extruder to absolute

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	SET_LED LED=neo RED=1 GREEN=0.0784 BLUE=0.5764
	max_extrude_only_distance: 500.0
	M83                            ; set extruder to relative
	G1 E10 F300                    ; extrude a little to soften tip
	G1 E-400 F2300                 ; retract filament completely
	M82                            ; set extruder to absolute

[gcode_macro PAUSE]
rename_existing = BASE_PAUSE
variable_extrude = 1.0
gcode = 
	SET_LED LED=neo RED=1 GREEN=0.549 BLUE=0
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	SAVE_GCODE_STATE NAME=PAUSE_state
	BASE_PAUSE
	G91
	G1 E-{E} F2100
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000

[gcode_macro RESUME]
rename_existing = BASE_RESUME
gcode = 
	SET_LED LED=neo RED=0 GREEN=0 BLUE=1
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	G91
	G1 E{E} F1800
	RESTORE_GCODE_STATE NAME=PAUSE_state
	BASE_RESUME

[gcode_macro CANCEL_PRINT]
rename_existing = BASE_CANCEL_PRINT
gcode = 
	SET_LED LED=neo RED=1 GREEN=0.549 BLUE=0
	SET_LED LED=neo RED=1 GREEN=0.9411 BLUE=0.7843
	LED=neo RED=0 GREEN=0 BLUE=0 WHITE=0
	TURN_OFF_HEATERS
	CLEAR_PAUSE
	SDCARD_RESET_FILE
	BASE_CANCEL_PRINT
	M400                           ; wait for buffer to clear
	G92 E0                         ; zero the extruder
	G1 E-3.0 F2000                 ; retract filament
	G91                            ; relative positioning
	{% set max_x = printer.configfile.config["stepper_x"]["position_max"]|float %}
	{% set max_y = printer.configfile.config["stepper_y"]["position_max"]|float %}
	{% set max_z = printer.configfile.config["stepper_z"]["position_max"]|float %}
	{% if printer.toolhead.position.x < (max_x - 20) %}
	{% set x_safe = 20.0 %}
	{% else %}
	{% set x_safe = -20.0 %}
	{% endif %}
	{% if printer.toolhead.position.y < (max_y - 20) %}
	{% set y_safe = 20.0 %}
	{% else %}
	{% set y_safe = -20.0 %}
	{% endif %}
	{% if printer.toolhead.position.z < (max_z - 2) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - printer.toolhead.position.z %}
	{% endif %}
	G0 Z{z_safe} F3600    ; move nozzle up
	G0 X{x_safe} Y{y_safe} F1800    ; move nozzle to remove stringing
	TURN_OFF_HEATERS
	M107                           ; turn off fan
	G90                            ; absolute positioning
	G0 X60 Y{max_y} F3600          ; park nozzle at rear
	M84
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 91 commands (v0.10.0-237-g28b568a6 / gcc: (15:7-2018-q2-6) 7.3.1 20180622 (release) [ARM/embedded-7-branch revision 261907] binutils: (2.31.1-11+rpi1+11) 2.31.1)
MCU 'mcu' config: BUS_PINS_i2c1=PB6,PB7 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_i2c1a=PF1,PF0 BUS_PINS_spi3=PB4,PB5,PB3 INITIAL_PINS=!PA13 STEPPER_BOTH_EDGE=1 ADC_MAX=4095 RESERVE_PINS_USB=PA11,PA12 CLOCK_FREQ=64000000 BUS_PINS_spi1=PA6,PA7,PA5 RESERVE_PINS_crystal=PF0,PF1 MCU=stm32g0b1xx STATS_SUMSQ_BASE=256 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13
mcu_temperature 'mcu' nominal base=-276.784661 slope=1328.761062
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
Starting heater checks for extruder
Stats 27.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2384 bytes_read=5169 bytes_retransmit=9 bytes_invalid=0 send_seq=207 receive_seq=207 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63994709  heater_bed: target=0 temp=0.0 pwm=0.000 raspberry_pi: temp=30.6 mcu_temp: temp=0.0 sysload=0.67 cputime=1.705 memavail=749840 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks client 1969461768: New connection
Stats 28.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2390 bytes_read=5185 bytes_retransmit=9 bytes_invalid=0 send_seq=208 receive_seq=208 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63998132  heater_bed: target=0 temp=0.0 pwm=0.000 raspberry_pi: temp=31.6 mcu_temp: temp=0.0 sysload=0.67 cputime=1.710 memavail=746756 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks client 1969461768: Client info {'program': 'Moonraker', 'version': 'v0.7.1-780-gdde9bcc'}
webhooks: registering remote method 'shutdown_machine' for connection id: 1969461768
webhooks: registering remote method 'reboot_machine' for connection id: 1969461768
webhooks: registering remote method 'pause_job_queue' for connection id: 1969461768
webhooks: registering remote method 'start_job_queue' for connection id: 1969461768
Stats 29.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2396 bytes_read=5333 bytes_retransmit=9 bytes_invalid=0 send_seq=209 receive_seq=209 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63998011  heater_bed: target=0 temp=22.9 pwm=0.000 raspberry_pi: temp=31.1 mcu_temp: temp=22.8 sysload=0.67 cputime=1.756 memavail=746688 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.3 pwm=0.000
Stats 30.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2402 bytes_read=5510 bytes_retransmit=9 bytes_invalid=0 send_seq=210 receive_seq=210 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63998489  heater_bed: target=0 temp=22.8 pwm=0.000 raspberry_pi: temp=31.6 mcu_temp: temp=23.0 sysload=0.70 cputime=1.771 memavail=739088 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.2 pwm=0.000
Stats 31.7: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000015 mcu_task_stddev=0.000033 bytes_write=2408 bytes_read=5688 bytes_retransmit=9 bytes_invalid=0 send_seq=211 receive_seq=211 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63998159  heater_bed: target=0 temp=22.9 pwm=0.000 raspberry_pi: temp=31.6 mcu_temp: temp=22.9 sysload=0.70 cputime=1.783 memavail=738096 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.2 pwm=0.000
Stats 32.7: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000015 mcu_task_stddev=0.000033 bytes_write=2414 bytes_read=5836 bytes_retransmit=9 bytes_invalid=0 send_seq=212 receive_seq=212 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997953  heater_bed: target=0 temp=22.9 pwm=0.000 raspberry_pi: temp=31.1 mcu_temp: temp=23.0 sysload=0.70 cputime=1.794 memavail=740064 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.3 pwm=0.000
Stats 33.7: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000015 mcu_task_stddev=0.000033 bytes_write=2420 bytes_read=6013 bytes_retransmit=9 bytes_invalid=0 send_seq=213 receive_seq=213 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997959  heater_bed: target=0 temp=22.8 pwm=0.000 raspberry_pi: temp=31.1 mcu_temp: temp=23.1 sysload=0.70 cputime=1.808 memavail=742556 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.2 pwm=0.000
Stats 34.7: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000015 mcu_task_stddev=0.000033 bytes_write=2426 bytes_read=6176 bytes_retransmit=9 bytes_invalid=0 send_seq=214 receive_seq=214 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997939  heater_bed: target=0 temp=22.6 pwm=0.000 raspberry_pi: temp=31.6 mcu_temp: temp=22.9 sysload=0.70 cputime=1.821 memavail=738448 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.3 pwm=0.000
Stats 35.7: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000015 mcu_task_stddev=0.000033 bytes_write=2432 bytes_read=6324 bytes_retransmit=9 bytes_invalid=0 send_seq=215 receive_seq=215 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997934  heater_bed: target=0 temp=22.9 pwm=0.000 raspberry_pi: temp=32.2 mcu_temp: temp=23.3 sysload=0.80 cputime=1.834 memavail=735984 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.1 pwm=0.000
Stats 36.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000011 mcu_task_stddev=0.000012 bytes_write=2438 bytes_read=6515 bytes_retransmit=9 bytes_invalid=0 send_seq=216 receive_seq=216 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997953  heater_bed: target=0 temp=22.7 pwm=0.000 raspberry_pi: temp=32.2 mcu_temp: temp=23.2 sysload=0.80 cputime=1.847 memavail=731464 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.2 pwm=0.000
Stats 37.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000011 mcu_task_stddev=0.000012 bytes_write=2444 bytes_read=6678 bytes_retransmit=9 bytes_invalid=0 send_seq=217 receive_seq=217 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997928  heater_bed: target=0 temp=22.9 pwm=0.000 raspberry_pi: temp=32.2 mcu_temp: temp=23.0 sysload=0.80 cputime=1.858 memavail=732308 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.3 pwm=0.000
Stats 38.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000011 mcu_task_stddev=0.000012 bytes_write=2450 bytes_read=6826 bytes_retransmit=9 bytes_invalid=0 send_seq=218 receive_seq=218 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997923  heater_bed: target=0 temp=22.7 pwm=0.000 raspberry_pi: temp=32.2 mcu_temp: temp=23.0 sysload=0.80 cputime=1.870 memavail=742408 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.1 pwm=0.000
Stats 39.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000011 mcu_task_stddev=0.000012 bytes_write=2456 bytes_read=7003 bytes_retransmit=9 bytes_invalid=0 send_seq=219 receive_seq=219 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 stalled_bytes=0 freq=63997922  heater_bed: target=0 temp=22.9 pwm=0.000 raspberry_pi: temp=32.7 mcu_temp: temp=23.1 sysload=0.80 cputime=1.883 memavail=743916 print_time=0.001 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.3 pwm=0.000
